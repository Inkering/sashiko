<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Sashiko Stitching</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <nav>
      <h1 id="about" class="title">SASHIKO STITCHING</h1>
      <ul>
        <li><a href="#about">â†¥TOP</a></li>
        <li><a href="#apron">APRON</a></li>
        <li><a href="#pant">PANT</a></li>
        <li><a href="#tote">TOTE</a></li>
        <li><a href="#tote">TOOLS</a></li>
      </ul>
    </nav>
    <img class="test" src="img/squiggles.svg"/>
    <h3 class="subtitle">SPRING 2022 - OLIN COLLEGE OF ENGINEERING</h3>

    <div class="container">
      <div class="garment">
        <h2 id="apron">APRON</h2>
        <!-- <audio src="audio/dottingtheshore.wav" type="audio/wav" controls></audio> 
        <p><i>this is a transcript of the audio recording</i></p> -->
        <div class="garment-imgs">
          <img class="photo" id="zoom-default" src="img/chair.jpg" alt="">
          <img class="photo" src="img/chair2.jpg" alt="">
          <img class="photo" src="img/chair3.jpg" alt="">
        </div>
      </div>
      <div class="garment">
        <h2 id="pant">PANT</h2>
        <div class="garment-imgs">
          <img class="photo" src="img/pant1.jpg" alt="">
        </div>
      </div>
      <div class="garment">      
        <h2 id="tote">TOTE</h2>
        <div class="garment-imgs">
          <img class="photo" src="img/tote.jpg" alt="">
        </div>
      </div>
      <div class="garment">      
        <h2 id="tools">TOOLS</h2>
        <div class="garment-imgs">
          <img class="photo" src="img/needles.jpg" alt="">
          <img class="photo" src="img/snips.jpg" alt="">
          <img class="photo" src="img/snipsbox.jpg" alt="">
          <img class="photo" src="img/thimble.jpg" alt="">
          <img class="photo" src="img/thimble2.jpg" alt="">
          <img class="photo" src="img/thread.jpg" alt="">
          <img class="photo" src="img/toolbox.jpg" alt="">
        </div>
      </div>
    </div>
    <script src="../node_modules/medium-zoom/dist/medium-zoom.min.js"></script>
    <script src="index.js"></script>
    <script src="https://unpkg.com/wavesurfer.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        var els = document.querySelectorAll("audio");
        for (var i = 0; i < els.length; i++) {
            console.log(els[i].src);
            let i_ = i;
            let src_ = els[i].src;
            let newNode = document.createElement("div")
            newNode.innerHTML = `<table style="padding-top:16px;padding-bottom:16px;"><tr><td style="position: relative;top: 4px;width:40px;"><div class="controls" style=""> <button class="audiobtn" data-action="play" style="background: #fff; border: none; padding-left:0;padding-right:0;"> <svg class="playicon" xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather feather-play-circle"><circle cx="12" cy="12" r="10"></circle><polygon points="10 8 16 12 10 16 10 8"></polygon></svg> <svg class="pauseicon" style="display:none;" xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather feather-pause-circle"><circle cx="12" cy="12" r="10"></circle><line x1="10" y1="15" x2="10" y2="9"></line><line x1="14" y1="15" x2="14" y2="9"></line></svg> </button></div></td><td width="100%"><div class="wave"></div></td></tr></table>`;
            els[i_].parentNode.insertBefore(newNode, els[i_])
            els[i].remove();
            let wavesurfer = WaveSurfer.create({
                container: document.getElementsByClassName("wave")[i_],
                waveColor: '#909090',
                progressColor: '#443e3c',
                cursorColor: '#ffffff',
                backend: 'MediaElement',
                mediaControls: false,
                hideScrollbar: true,
                minPxPerSec: 120,
                normalize: true,
                height: 64,
            });
            wavesurfer.once('ready', function() {
                console.log('Using wavesurfer.js ' + WaveSurfer.VERSION);
            });
            wavesurfer.on('error', function(e) {
                console.warn(e);
            });
            wavesurfer.on('play', function(e) {
                document.getElementsByClassName("playicon")[i_].style.display = "none";
                document.getElementsByClassName("pauseicon")[i_].style.display = "block";
            });
            wavesurfer.on('pause', function(e) {
                document.getElementsByClassName("playicon")[i_].style.display = "block";
                document.getElementsByClassName("pauseicon")[i_].style.display = "none";
            });
            newNode.querySelector('[data-action="play"]')
                .addEventListener('click', wavesurfer.playPause.bind(wavesurfer));
            wavesurfer.load(src_);
        }
    });
    </script>
</body>
</html>